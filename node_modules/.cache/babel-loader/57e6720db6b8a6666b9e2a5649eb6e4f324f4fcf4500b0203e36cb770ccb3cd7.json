{"ast":null,"code":"var _s = $RefreshSig$();\nimport React from \"react\";\nfunction dispatchStorageEvent(key, newValue) {\n  window.dispatchEvent(new StorageEvent(\"storage\", {\n    key,\n    newValue\n  }));\n}\nconst setLocalStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.localStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\nconst removeLocalStorageItem = key => {\n  window.localStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\nconst getLocalStorageItem = key => {\n  return window.localStorage.getItem(key);\n};\nconst useLocalStorageSubscribe = callback => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\nconst getLocalStorageServerSnapshot = () => {\n  throw Error(\"useLocalStorage is a client-only hook\");\n};\nexport function useLocalStorage(key, initialValue) {\n  _s();\n  const getSnapshot = () => getLocalStorageItem(key);\n  const store = React.useSyncExternalStore(useLocalStorageSubscribe, getSnapshot, getLocalStorageServerSnapshot);\n  const setState = React.useCallback(v => {\n    try {\n      const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n      if (nextState === undefined || nextState === null) {\n        removeLocalStorageItem(key);\n      } else {\n        setLocalStorageItem(key, nextState);\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n  }, [key, store]);\n  React.useEffect(() => {\n    if (getLocalStorageItem(key) === null && typeof initialValue !== \"undefined\") {\n      setLocalStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n_s(useLocalStorage, \"6nUtMI45bOIcKUokXUk/NGaxr6k=\", false, function () {\n  return [React.useSyncExternalStore];\n});","map":{"version":3,"names":["React","dispatchStorageEvent","key","newValue","window","dispatchEvent","StorageEvent","setLocalStorageItem","value","stringifiedValue","JSON","stringify","localStorage","setItem","removeLocalStorageItem","removeItem","getLocalStorageItem","getItem","useLocalStorageSubscribe","callback","addEventListener","removeEventListener","getLocalStorageServerSnapshot","Error","useLocalStorage","initialValue","_s","getSnapshot","store","useSyncExternalStore","setState","useCallback","v","nextState","parse","undefined","e","console","warn","useEffect"],"sources":["/Users/csongorszeles/git-projects/quote-maker/src/hooks.js"],"sourcesContent":["import React from \"react\";\n\nfunction dispatchStorageEvent(key, newValue) {\n  window.dispatchEvent(new StorageEvent(\"storage\", { key, newValue }));\n}\n\nconst setLocalStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.localStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeLocalStorageItem = (key) => {\n  window.localStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getLocalStorageItem = (key) => {\n  return window.localStorage.getItem(key);\n};\n\nconst useLocalStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getLocalStorageServerSnapshot = () => {\n  throw Error(\"useLocalStorage is a client-only hook\");\n};\n\nexport function useLocalStorage(key, initialValue) {\n  const getSnapshot = () => getLocalStorageItem(key);\n\n  const store = React.useSyncExternalStore(\n    useLocalStorageSubscribe,\n    getSnapshot,\n    getLocalStorageServerSnapshot\n  );\n\n  const setState = React.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeLocalStorageItem(key);\n        } else {\n          setLocalStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  React.useEffect(() => {\n    if (\n      getLocalStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setLocalStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SAASC,oBAAoBA,CAACC,GAAG,EAAEC,QAAQ,EAAE;EAC3CC,MAAM,CAACC,aAAa,CAAC,IAAIC,YAAY,CAAC,SAAS,EAAE;IAAEJ,GAAG;IAAEC;EAAS,CAAC,CAAC,CAAC;AACtE;AAEA,MAAMI,mBAAmB,GAAGA,CAACL,GAAG,EAAEM,KAAK,KAAK;EAC1C,MAAMC,gBAAgB,GAAGC,IAAI,CAACC,SAAS,CAACH,KAAK,CAAC;EAC9CJ,MAAM,CAACQ,YAAY,CAACC,OAAO,CAACX,GAAG,EAAEO,gBAAgB,CAAC;EAClDR,oBAAoB,CAACC,GAAG,EAAEO,gBAAgB,CAAC;AAC7C,CAAC;AAED,MAAMK,sBAAsB,GAAIZ,GAAG,IAAK;EACtCE,MAAM,CAACQ,YAAY,CAACG,UAAU,CAACb,GAAG,CAAC;EACnCD,oBAAoB,CAACC,GAAG,EAAE,IAAI,CAAC;AACjC,CAAC;AAED,MAAMc,mBAAmB,GAAId,GAAG,IAAK;EACnC,OAAOE,MAAM,CAACQ,YAAY,CAACK,OAAO,CAACf,GAAG,CAAC;AACzC,CAAC;AAED,MAAMgB,wBAAwB,GAAIC,QAAQ,IAAK;EAC7Cf,MAAM,CAACgB,gBAAgB,CAAC,SAAS,EAAED,QAAQ,CAAC;EAC5C,OAAO,MAAMf,MAAM,CAACiB,mBAAmB,CAAC,SAAS,EAAEF,QAAQ,CAAC;AAC9D,CAAC;AAED,MAAMG,6BAA6B,GAAGA,CAAA,KAAM;EAC1C,MAAMC,KAAK,CAAC,uCAAuC,CAAC;AACtD,CAAC;AAED,OAAO,SAASC,eAAeA,CAACtB,GAAG,EAAEuB,YAAY,EAAE;EAAAC,EAAA;EACjD,MAAMC,WAAW,GAAGA,CAAA,KAAMX,mBAAmB,CAACd,GAAG,CAAC;EAElD,MAAM0B,KAAK,GAAG5B,KAAK,CAAC6B,oBAAoB,CACtCX,wBAAwB,EACxBS,WAAW,EACXL,6BACF,CAAC;EAED,MAAMQ,QAAQ,GAAG9B,KAAK,CAAC+B,WAAW,CAC/BC,CAAC,IAAK;IACL,IAAI;MACF,MAAMC,SAAS,GAAG,OAAOD,CAAC,KAAK,UAAU,GAAGA,CAAC,CAACtB,IAAI,CAACwB,KAAK,CAACN,KAAK,CAAC,CAAC,GAAGI,CAAC;MAEpE,IAAIC,SAAS,KAAKE,SAAS,IAAIF,SAAS,KAAK,IAAI,EAAE;QACjDnB,sBAAsB,CAACZ,GAAG,CAAC;MAC7B,CAAC,MAAM;QACLK,mBAAmB,CAACL,GAAG,EAAE+B,SAAS,CAAC;MACrC;IACF,CAAC,CAAC,OAAOG,CAAC,EAAE;MACVC,OAAO,CAACC,IAAI,CAACF,CAAC,CAAC;IACjB;EACF,CAAC,EACD,CAAClC,GAAG,EAAE0B,KAAK,CACb,CAAC;EAED5B,KAAK,CAACuC,SAAS,CAAC,MAAM;IACpB,IACEvB,mBAAmB,CAACd,GAAG,CAAC,KAAK,IAAI,IACjC,OAAOuB,YAAY,KAAK,WAAW,EACnC;MACAlB,mBAAmB,CAACL,GAAG,EAAEuB,YAAY,CAAC;IACxC;EACF,CAAC,EAAE,CAACvB,GAAG,EAAEuB,YAAY,CAAC,CAAC;EAEvB,OAAO,CAACG,KAAK,GAAGlB,IAAI,CAACwB,KAAK,CAACN,KAAK,CAAC,GAAGH,YAAY,EAAEK,QAAQ,CAAC;AAC7D;AAACJ,EAAA,CApCeF,eAAe;EAAA,QAGfxB,KAAK,CAAC6B,oBAAoB;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}